/*!
 * 2020-12-31日上线，闲语H5是陈刚的第一个全栈项目，自己完成从前端设计，
 * 到后端接口的设计，
 * 以及Linux系统上Redis和MongoDB数据库安装使用，Nginx代理部署，HTTPS以及域名申请，
 * 见证了过去半年所有空闲时间的努力！新的一年，奥利给！我轻轻的来了，又轻轻地走了......
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["group-word"],{"0959":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"xianyu-dictionary-item",class:{"no-mragin-bottom-dic":t.noMarginBottom},domProps:{innerHTML:t._s(t.dictionary)},on:{click:function(e){return t.$emit("click")}}})},o=[],a={name:"DictionaryItem",props:{dictionary:{type:String,required:!1},noMarginBottom:{type:Boolean,default:!1}}},n=a,r=(i("800e"),i("2877")),c=Object(r["a"])(n,s,o,!1,null,"23e4265b",null);e["a"]=c.exports},2660:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"xianyu-dictionary-detail"},[i("back-top",{attrs:{title:"成语列表"}}),i("div",{ref:"dictionary-list-container",staticClass:"xianyu-dictionary-detail-container",attrs:{id:"dictionary-list-container"}},[t.showSkeleton?i("div",{staticClass:"xianyu-word-list-skeleton"},[i("list-skeleton")],1):i("van-pull-refresh",{on:{refresh:t.onPullDownRefresh},model:{value:t.pullDown,callback:function(e){t.pullDown=e},expression:"pullDown"}},[i("van-list",{attrs:{finished:t.loadMoreFinished,"immediate-check":!1,offset:50,"finished-text":"我也是有底线的~"},on:{load:t.onLoadMoreLoad},model:{value:t.loadMore,callback:function(e){t.loadMore=e},expression:"loadMore"}},t._l(t.dictionarys,(function(e,s){return i("dictionary-item",{key:e._id,attrs:{dictionary:e.word_title,"no-margin-bottom":s===t.dictionarys.length-1},on:{click:function(i){return t.$router.push("/dictionary-detail/"+e._id)}}})})),1)],1)],1)],1)},o=[],a=i("0959"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("skeleton",{staticClass:"skeleton-word-list",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},t._l(20,(function(t){return i("tb-skeleton",{key:t+Math.random(),staticClass:"skeleton-word-list-item",attrs:{width:"100%",height:"35px",shape:"rect"}})})),1)},r=[],c={},l=c,d=(i("a52b"),i("2877")),h=Object(d["a"])(l,n,r,!1,null,"e13e52c4",null),u=h.exports,p=i("e56e"),b=i("60bb"),w={name:"DictionaryList",data(){return{currentPage:1,perPage:20,dictionarys:[],total:0,pullDown:!1,loadMore:!1,loadMoreFinished:!1,dictionaryListScrollTop:0,showSkeleton:!0}},mounted(){this.$store.commit("addCachedPages","DictionaryList"),this.getDictionaryListHandle(),this.$refs["dictionary-list-container"].addEventListener("scroll",Object(b["debounce"])(this.scrollHandle,30))},activated(){this.$refs["dictionary-list-container"].scrollTop=this.dictionaryListScrollTop},computed:{totalPage(){return Math.ceil(this.total/this.perPage)}},methods:{getDictionaryListHandle(){Object(p["b"])(this.currentPage).then(t=>{0===t.errno&&(this.dictionarys=t.data,this.total=t.total,setTimeout(()=>{this.showSkeleton=!1},30))}).catch(()=>{})},onPullDownRefresh(){this.currentPage=1,this.loadMoreFinished=!1,this.loadMore=!1,Object(p["b"])(this.currentPage).then(t=>{0===t.errno&&(this.dictionarys=t.data,this.total=t.total,this.pullDown=!1,this.$toast("刷新成功"))}).catch(()=>{})},async onLoadMoreLoad(){if(this.currentPage>=this.totalPage)return void(this.loadMoreFinished=!0);const t=await Object(p["b"])(++this.currentPage);0===t.errno&&(this.dictionarys=[...this.dictionarys,...t.data],this.loadMore=!1)},scrollHandle(){this.dictionaryListScrollTop=this.$refs["dictionary-list-container"].scrollTop}},components:{DictionaryItem:a["a"],ListSkeleton:u}},f=w,m=(i("c594"),Object(d["a"])(f,s,o,!1,null,"f0ba8e20",null));e["default"]=m.exports},"800e":function(t,e,i){"use strict";i("b5e8")},8033:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"xianyu-dictionary",style:{background:t.showSkeleton?"#fff":"rgba(240, 239, 226, .9"}},[i("back-top",{attrs:{title:"成语词典"}}),t.showSkeleton?i("div",{staticClass:"xianyu-word-detail-skeleton"},[i("detail-skeleton")],1):i("div",{staticClass:"xianyu-wrapper-container"},[i("div",{staticClass:"xianyu-dictionary-container"},t._l(t.dictionaryData.dic,(function(e,s){return i("div",{key:s.toString()+Math.random(),staticClass:"dictionary-item"},[i("div",{staticClass:"pinyin"},[t._v(t._s(e.pinyin))]),i("div",{staticClass:"hanzi"},[i("div",{staticClass:"left-line"}),i("div",{staticClass:"right-line"}),i("div",{staticClass:"top-line"}),i("div",{staticClass:"bottom-line"}),i("div",{staticClass:"col-line"}),i("div",{staticClass:"row-line"}),i("div",{staticClass:"word-conatiner"},[t._v(t._s(e.hanzi))])])])})),0),i("div",{staticClass:"word-meaning"},[i("div",{staticClass:"meaning-container"},[i("strong",{staticClass:"word-strong"},[t._v("释义：")]),t._v(t._s(t.dictionaryData.meaning))]),i("div",{staticClass:"source"},[i("strong",{staticClass:"word-strong"},[t._v("出处：")]),t._v(t._s(t.dictionaryData.source))]),t.dictionaryData.story&&t.dictionaryData.story.trim().length>0?i("div",{staticClass:"story"},[i("strong",{staticClass:"word-strong"},[t._v("成语故事：")]),t._v(t._s(t.dictionaryData.story))]):t._e()]),i("div",{staticClass:"zan-collect"},[i("div",{staticClass:"zan-collect-container",class:{active:t.zanState},on:{click:t.userZanOrCancel}},[t.zanState?i("i",{staticClass:"iconfont icon-dianzan"}):i("i",{staticClass:"iconfont icon-dianzan1"}),i("span",{staticClass:"word-exble-style"},[t._v(t._s(t.zanNumber))])]),i("div",{staticClass:"zan-collect-container",class:{active:t.collectState},on:{click:t.userCollectOrCancel}},[t.collectState?i("i",{staticClass:"iconfont icon-shoucang1"}):i("i",{staticClass:"iconfont icon-shoucang"}),i("span",{staticClass:"word-exble-style"},[t._v(t._s(t.collectNumber))])])])])],1)},o=[],a=i("e56e"),n=i("c24f"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("skeleton",{staticClass:"skeleton-word",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[i("skeleton",{staticClass:"skeleton-word-detail",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},t._l(4,(function(t){return i("skeleton",{key:t+Math.random(),staticClass:"skeleton-word-detail-word",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[i("tb-skeleton",{staticClass:"skeleton-word-detail-word-pinyin",attrs:{width:"42px",height:"14px",shape:"rect"}}),i("tb-skeleton",{staticClass:"skeleton-word-detail-word-hanzi",attrs:{width:"42px",height:"42px",shape:"rect"}})],1)})),1),i("skeleton",{staticClass:"skeleton-word-detail-meaning",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[i("tb-skeleton",{staticClass:"skeleton-word-detail-meaning-top",attrs:{width:"100%",height:"14px",shape:"rect"}}),i("tb-skeleton",{attrs:{width:"80%",height:"14px",shape:"rect"}})],1),t._l(2,(function(t){return i("skeleton",{key:t+Math.random(),staticClass:"skeleton-word-detail-birth",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[i("tb-skeleton",{staticClass:"skeleton-word-detail-meaning-top",attrs:{width:"100%",height:"14px",shape:"rect"}}),i("tb-skeleton",{attrs:{width:"60%",height:"14px",shape:"rect"}})],1)})),i("skeleton",{staticClass:"skeleton-word-detail-story",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[i("tb-skeleton",{staticClass:"skeleton-word-detail-meaning-top",attrs:{width:"100%",height:"210px",shape:"rect"}})],1),i("skeleton",{staticClass:"skeleton-word-detail-operate",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},t._l(2,(function(t){return i("tb-skeleton",{key:t+Math.random(),staticClass:"skeleton-word-detail-operate-top",attrs:{width:"70px",height:"35px",shape:"rect"}})})),1)],2)},c=[],l={},d=l,h=(i("eb6b"),i("2877")),u=Object(h["a"])(d,r,c,!1,null,"676964de",null),p=u.exports,b={name:"Dictionary",data(){return{dictionaryData:{},userId:null,userLikeWordsId:[],userCollectWordsId:[],zanNumber:0,collectNumber:0,showSkeleton:!0}},watch:{userId(t){t&&(this.getUserLikeWords(t),this.getUserCollectWords(t))}},mounted(){this.getDictionaryDetail(),this.isLogin&&this.getUserId()},computed:{isLogin(){return this.$store.state.token.token},wordId(){return this.$route.params.dicId},zanState(){return this.isLogin&&this.userLikeWordsId.includes(this.wordId)},collectState(){return this.isLogin&&this.userCollectWordsId.includes(this.wordId)}},methods:{async getDictionaryDetail(){try{const t=await Object(a["a"])(this.$route.params.dicId);if(0===t.errno){const e=t.data.word_pinyin.trim().split(" "),i=t.data.word_title.trim().split(""),s=[];e.forEach((t,e)=>{s.push({pinyin:t,hanzi:i[e]})}),this.zanNumber=t.data.zan_number,this.collectNumber=t.data.collect_number,this.dictionaryData={dic:s,meaning:t.data.word_meaning,source:t.data.word_birth,zan_number:t.data.zan_number,collect_number:t.data.collect_number,story:t.data.word_story},setTimeout(()=>{this.showSkeleton=!1},30)}}catch(t){console.log(t,"错误捕获"),this.$toast("请求的数据不存在"),this.$router.push("/dictionary-list")}},async getUserId(){const t=await Object(n["p"])();0===t.errno&&(this.userId=t.data._id)},async getUserLikeWords(t){const e=await Object(n["n"])(t);if(0===e.errno){const t=[];e.data.forEach(e=>t.push(e._id)),this.userLikeWordsId=t}},async getUserCollectWords(t){const e=await Object(n["k"])(t);if(0===e.errno){const t=[];e.data.forEach(e=>t.push(e._id)),this.userCollectWordsId=t}},async userCollectOrCancel(){if(this.isLogin)if(this.collectState){const t=await Object(n["y"])(this.wordId);if(0===t.errno){this.$toast("取消收藏成功");const t=this.userCollectWordsId.indexOf(this.wordId);if(t>-1){this.userCollectWordsId.splice(t,1);const e=await Object(a["a"])(this.wordId);0===e.errno&&(this.collectNumber=e.data.collect_number)}}}else{const t=await Object(n["K"])(this.wordId);if(0===t.errno&&!this.userCollectWordsId.includes(this.wordId)){this.$toast("收藏成功"),this.userCollectWordsId.push(this.wordId);const t=await Object(a["a"])(this.wordId);0===t.errno&&(this.collectNumber=t.data.collect_number)}}else this.$dialog.confirm({message:'<p style="font-size: 16px;line-height: 25px">此操作需要登录，\n是否跳转到登录页面？</p>',showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"确定",confirmButtonColor:"#409fea",cancelButtonText:"取消",cancelButtonColor:"#666"}).then(()=>{this.$router.replace({path:"/login",query:{redirect:this.$route.fullPath}})}).catch(t=>{console.log(t)})},async userZanOrCancel(){if(this.isLogin)if(this.zanState){const t=await Object(n["E"])(this.wordId);if(0===t.errno){this.$toast("取消点赞成功");const t=this.userLikeWordsId.indexOf(this.wordId);t>-1&&this.userLikeWordsId.splice(t,1);const e=await Object(a["a"])(this.wordId);0===e.errno&&(this.zanNumber=e.data.zan_number)}}else{const t=await Object(n["U"])(this.wordId);if(0===t.errno&&!this.userLikeWordsId.includes(this.wordId)){this.userLikeWordsId.push(this.wordId),this.$toast("点赞成功");const t=await Object(a["a"])(this.wordId);0===t.errno&&(this.zanNumber=t.data.zan_number)}}else this.$dialog.confirm({message:'<p style="font-size: 16px;line-height: 25px">此操作需要登录，\n是否跳转到登录页面？</p>',showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"确定",confirmButtonColor:"#409fea",cancelButtonText:"取消",cancelButtonColor:"#666"}).then(()=>{this.$router.replace({path:"/login",query:{redirect:this.$route.fullPath}})}).catch(t=>{console.log(t)})}},components:{DetailSkeleton:p}},w=b,f=(i("950d"),Object(h["a"])(w,s,o,!1,null,"538f29f0",null));e["default"]=f.exports},"86c7":function(t,e,i){},"950d":function(t,e,i){"use strict";i("b97b")},a52b:function(t,e,i){"use strict";i("fb43")},b5e8:function(t,e,i){},b97b:function(t,e,i){},c1af:function(t,e,i){},c594:function(t,e,i){"use strict";i("86c7")},e56e:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"a",(function(){return a}));var s=i("751a");const o=(t=1,e="")=>s["a"].get(`/words?current_page=${t}&q=${e}`),a=t=>s["a"].get("/words/"+t)},eb6b:function(t,e,i){"use strict";i("c1af")},fb43:function(t,e,i){}}]);