/*!
 * 2020-12-31日上线，闲语H5是陈刚的第一个全栈项目，自己完成从前端设计，
 * 到后端接口的设计，
 * 以及Linux系统上Redis和MongoDB数据库安装使用，Nginx代理部署，HTTPS以及域名申请，
 * 见证了过去半年所有空闲时间的努力！新的一年，奥利给！我轻轻的来了，又轻轻地走了......
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["group-dynamic"],{3267:function(t,e,n){},5247:function(t,e,n){},"66bf":function(t,e,n){"use strict";n("ae95")},"78e4":function(t,e,n){"use strict";n("b96b")},"910d":function(t,e,n){},ae95:function(t,e,n){},b96b:function(t,e,n){},c967:function(t,e,n){"use strict";n("910d")},cb70:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dynamic-detail"},[n("back-top",{attrs:{title:"动态详情"}}),t.showSkeleton?n("div",{staticClass:"xianyu-dynamic-detail-skeleton"},[n("dynamic-skeleton")],1):n("div",{staticClass:"xianyu-dynamic-detail-container"},[n("div",{staticClass:"dynamic-detail-user"},[n("div",{staticClass:"dynamic-detail-user-container"},[n("van-image",{attrs:{width:"50",height:"50",fit:"cover",round:"",src:t.dynamic.publisher&&t.dynamic.publisher.avatar_url},on:{click:function(e){return t.$router.push("/my-detail/"+t.dynamic.publisher._id)}}}),n("div",{staticClass:"dynamic-detail-user-name"},[n("h1",[t._v(t._s(t.dynamic.publisher&&t.dynamic.publisher.nickname))]),n("h3",[t._v(t._s(t._f("timeformat")(t.dynamic&&t.dynamic.createdAt)))])])],1)]),n("div",{staticClass:"dynamic-detail-content"},[n("p",{domProps:{innerHTML:t._s(t.dynamic.content)}}),t._l(t.dynamic.avatar_url,(function(e,s){return n("van-image",{key:e,attrs:{width:"100",height:"100",fit:"cover","lazy-load":"",src:e},on:{click:function(e){return t.showPreview(s)}}})}))],2),n("divide-area",{attrs:{height:10}}),n("comment-list",{ref:"secondInputRef",attrs:{comments:t.comments,"show-no-comments":t.showNoComments,"zan-id":t.userZanCommentId,"is-hot":t.isHot,placeholder:t.reply&&t.reply.nickname},on:{reply:t.replyHandle,like:t.userLikeCommentsHandle,unlike:t.userUnlikeCommentsHandle,secondLikes:t.secondLikeHandle,secondUnlikes:t.secondUnlikeHandle,hot:t.getCommentSwicth,secondSend:t.secondSendHandle,secondReplys:t.secondReplysHandle},model:{value:t.secondValue,callback:function(e){t.secondValue=e},expression:"secondValue"}}),n("bottom-comment",{ref:"inputArea",attrs:{placeholder:t.reply&&t.reply.nickname},on:{send:t.addCommentsHandle},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],1)],1)},o=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bottom-comment",attrs:{id:"bottom-content"}},[t.showInput?t._e():n("div",{staticClass:"operate-container"},[n("input",{class:{needicon:t.needicon},attrs:{readonly:"",placeholder:"记得要文明评论哟",type:"text"},on:{click:t.showInputHandle}})]),t.showInput?n("div",{ref:"edit",staticClass:"edit-container",attrs:{id:"edit"}},[n("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],ref:"input",staticClass:"content-editable",attrs:{autofocus:"autofocus",placeholder:t.placeholder?"回复"+t.placeholder:"发表原创文字，沉淀灵感，留住思考",type:"text"},domProps:{value:t.inputValue},on:{input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}),n("div",{staticClass:"submit",on:{click:function(e){return t.$emit("send")}}},[t._v("发送")])]):t._e()])},a=[],c={name:"BottomComment",props:{needicon:{type:Boolean,default:!0},value:{type:String},placeholder:{type:String}},data(){return{showInput:!1,isZan:!1,isCollect:!1}},computed:{inputValue:{get(){return this.value},set(t){this.$emit("input",t)}}},methods:{divInput(t){this.$emit("input",t.target.value)},showInputHandle(){this.showInput=!0},isAndroid(){const t="object"===typeof window?window.navigator.userAgent:"";return/Android/i.test(t)},isIOS(){const t="object"===typeof window?window.navigator.userAgent:"";return/iPhone|iPod|iPad/i.test(t)},keyBoard(){if(this.isAndroid()){window.innerHeight;window.addEventListener("resize",()=>{window.innerHeight})}else this.isIOS()&&(window.addEventListener("focusin",()=>{this.showInput=!0}),window.addEventListener("focusout",()=>{this.showInput=!1}))}},mounted(){this.keyBoard()},directives:{focus:{inserted:function(t){t.focus()}}}},r=c,m=(n("78e4"),n("2877")),d=Object(m["a"])(r,i,a,!1,null,"210de735",null),l=d.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-list"},[n("van-sticky",{attrs:{"offset-top":46}},[n("div",{staticClass:"comment-list-header"},[n("div",{staticClass:"comment-list-header-title"},[t._v("评论")]),n("div",{staticClass:"comment-list-header-sort"},[n("span",{staticClass:"hot",class:{active:t.isHot},on:{click:t.hotHandle}},[t._v("热门")]),n("span",{staticClass:"sep-line"},[t._v("/")]),n("span",{staticClass:"newest",class:{active:!t.isHot},on:{click:t.latestHandle}},[t._v("最新")])])])]),t.comments.length>0?n("div",{staticClass:"comment-list-container"},t._l(t.comments,(function(e,s){return n("div",{key:s,staticClass:"comment-item"},[n("img",{attrs:{src:e.commentator&&e.commentator.avatar_url},on:{click:function(n){return t.$router.push("/my-detail/"+e.commentator._id)}}}),n("div",{staticClass:"comment-item-content"},[n("div",{staticClass:"first-user"},[n("div",{staticClass:"first-user-left"},[n("h1",[t._v(t._s(e.commentator&&e.commentator.nickname))]),n("span",[t._v(t._s(t._f("timeformat")(e.createdAt)))])]),n("div",{staticClass:"first-user-right"},[n("span",[t._v(t._s(e.zan_number))]),t.isLogin&&t.zanId.includes(e._id)?n("i",{staticClass:"iconfont icon-dianzan active",on:{click:function(n){return t.$emit("unlike",e._id)}}}):n("i",{staticClass:"iconfont icon-dianzan1",on:{click:function(n){return t.$emit("like",e._id)}}})])]),n("div",{staticClass:"first-user-comment",on:{click:function(n){return t.$emit("reply",{user_id:e.commentator._id,nickname:e.commentator.nickname,comment_id:e._id})}}},[t._v(t._s(e.content))]),e.second_comment.length>0?n("div",{staticClass:"user-repeat",on:{click:function(n){return t.showPopupHandle(e)}}},[t._l(e.second_comment.slice(0,3),(function(e,s){return n("div",{key:s,staticClass:"user-repeat-item"},[n("h1",[t._v(t._s(e.commentator&&e.commentator.nickname)+"：")]),n("span",[t._v(t._s(e.content))])])})),e.second_comment.length>3?n("div",{staticClass:"see-more"},[t._v("查看全部"+t._s(e.second_comment.length)+"条回复")]):t._e()],2):t._e()])])})),0):t._e(),t.comments.length<=0&&t.showNoComments?n("div",{staticClass:"no-comments"},[n("i",{staticClass:"iconfont icon-pinglun"}),n("span",{staticClass:"no-comments-tips"},[t._v("快来添加第一条评论吧")])]):t._e(),n("van-popup",{style:{height:"100%"},attrs:{value:t.showPopup,position:"bottom",overlay:!1}},[n("div",{staticClass:"comment-extra"},[n("van-sticky",[n("div",{staticClass:"comment-number"},[n("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){return t.closePopup()}}}),n("span",[t._v(t._s(t.secondComments.length>0?t.secondComments.length+"条回复":"暂无回复"))])])]),n("comment-subitem",{attrs:{borderbottom:!0,comment:t.fisrtComment,"zan-id":t.zanId,"root-id":t.fisrtComment._id,root:!0},on:{rootLike:function(e){return t.$emit("like",t.fisrtComment._id)},rootUnlike:function(e){return t.$emit("unlike",t.fisrtComment._id)},secondReply:t.secondReplyHandle}}),n("divide-area"),t._l(t.secondComments,(function(e,s){return n("comment-subitem",{key:s,attrs:{comment:e,root:!1,"root-id":t.fisrtComment._id,"zan-id":t.zanId,marginbottom:s===t.secondComments.length-1?44:0},on:{secondLike:function(n){return t.$emit("secondLikes",{firstId:t.fisrtComment._id,second_id:e._id})},secondUnlike:function(n){return t.$emit("secondUnlikes",{firstId:t.fisrtComment._id,second_id:e._id})},secondReply:t.secondReplyHandle}})})),n("bottom-comment",{ref:"secondReply",attrs:{needicon:!1,placeholder:t.placeholder},on:{send:t.secondSendHandle},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],2)])],1)},u=[],p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-sub-item",style:{"margin-bottom":t.marginbottom+"px"}},[n("img",{attrs:{src:t.comment.commentator&&t.comment.commentator.avatar_url},on:{click:function(e){return t.$router.push("/my-detail/"+t.comment.commentator._id)}}}),n("div",{staticClass:"item-container"},[n("div",{staticClass:"item-container-user"},[n("div",{staticClass:"item-container-user-left"},[n("h1",[t._v(t._s(t.comment.commentator&&t.comment.commentator.nickname))]),n("p",[t._v(t._s(t.comment.created))])]),n("div",{staticClass:"item-container-user-right"},[n("span",[t._v(t._s(t.comment.zan_number))]),t.isLogin&&t.zanId.includes(t.comment._id)?n("i",{staticClass:"iconfont icon-dianzan active",on:{click:t.unlikeHandle}}):n("i",{staticClass:"iconfont icon-dianzan1",on:{click:t.likeHandle}})])]),n("div",{staticClass:"item-container-comment",class:{borderbottom:t.borderbottom},on:{click:t.replyHandle}},[t._v(" "+t._s(t.comment.content)+" ")])])])},f=[],y={name:"CommentSubItem",props:{marginbottom:{type:Number,default:0},comment:{type:Object,default:()=>{},required:!0},borderbottom:{type:Boolean,default:!1},zanId:{type:Array,default:()=>[]},root:{type:Boolean},rootId:{type:String}},computed:{isLogin(){return this.$store.state.token.token}},methods:{likeHandle(){this.root?this.$emit("rootLike"):this.$emit("secondLike")},unlikeHandle(){this.root?this.$emit("rootUnlike"):this.$emit("secondUnlike")},replyHandle(){this.$emit("secondReply",this.comment.commentator._id,this.comment.commentator.nickname,this.rootId)}}},k=y,C=(n("d512"),Object(m["a"])(k,p,f,!1,null,"4d2180de",null)),b=C.exports,g=n("efe7"),_={name:"CommentList",props:{comments:{type:Array,default:()=>[],required:!0},showNoComments:{type:Boolean,default:!1},zanId:{type:Array,default:()=>[]},isHot:{type:Boolean,default:!0},value:{type:String},placeholder:{type:String}},data(){return{showPopup:!1,secondComments:[],fisrtComment:{}}},watch:{comments:{handler(t){const e=t.findIndex(t=>t._id===this.fisrtComment._id);e>-1&&(this.secondComments=t[e].second_comment)},deep:!0}},computed:{isLogin(){return this.$store.state.token.token},inputValue:{get(){return this.value},set(t){this.$emit("input",t)}}},methods:{closePopup(){this.showPopup=!1},showPopupHandle(t){this.fisrtComment=t,this.showPopup=!0,this.secondComments=t.second_comment},hotHandle(){this.$emit("hot",!0)},latestHandle(){this.$emit("hot",!1)},secondSendHandle(){this.$emit("secondSend",{rootId:this.fisrtComment._id,nickname:this.fisrtComment.commentator.nickname,replyTo:this.fisrtComment.commentator._id})},secondReplyHandle(t,e,n){this.$emit("secondReplys",{replyTo:t,nickname:e,rootId:n})}},components:{CommentSubitem:b,DivideArea:g["a"],BottomComment:l}},w=_,v=(n("66bf"),Object(m["a"])(w,h,u,!1,null,"222d251f",null)),x=v.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("skeleton",{staticClass:"skeleton-dynamic-detail",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[n("skeleton",{staticClass:"skeleton-dynamic-detail-user",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[n("skeleton",{staticClass:"skeleton-dynamic-detail-user-about",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[n("tb-skeleton",{staticClass:"skeleton-dynamic-detail-user-about-avatar",attrs:{width:"48px",height:"48px",shape:"circle"}}),n("skeleton",{staticClass:"skeleton-dynamic-detail-user-about-content",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[n("tb-skeleton",{attrs:{width:"100px",height:"16px",shape:"rect"}}),n("tb-skeleton",{attrs:{width:"150px",height:"12px",shape:"rect"}})],1)],1),n("skeleton",{staticClass:"skeleton-dynamic-detail-user-follow",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[n("tb-skeleton",{staticClass:"skeleton-dynamic-detail-user-follow-tab",attrs:{width:"80px",height:"30px",shape:"rect"}})],1)],1),n("skeleton",{staticClass:"skeleton-dynamic-detail-cont",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[t._l(5,(function(t){return n("tb-skeleton",{key:t+Math.random(),staticClass:"skeleton-dynamic-detail-cont-item",attrs:{width:"100%",height:"15px",shape:"rect"}})})),n("skeleton",{staticClass:"skeleton-dynamic-detail-pics",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},t._l(3,(function(t){return n("tb-skeleton",{key:t+Math.random(),staticClass:"skeleton-dynamic-detail-pic-item",attrs:{width:"100px",height:"100px",shape:"rect"}})})),1),n("skeleton",{staticClass:"skeleton-dynamic-detail-commenttitle",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[n("skeleton",{staticClass:"skeleton-dynamic-detail-commenttitle-left",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[n("tb-skeleton",{attrs:{width:"80px",height:"16px",shape:"rect"}})],1),n("skeleton",{staticClass:"skeleton-dynamic-detail-commenttitle-right",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[n("tb-skeleton",{attrs:{width:"50px",height:"16px",shape:"rect"}}),n("tb-skeleton",{attrs:{width:"50px",height:"16px",shape:"rect"}})],1)],1),n("skeleton",{staticClass:"skeleton-dynamic-detail-comment",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[n("skeleton",{staticClass:"skeleton-dynamic-detail-comment-avatar",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[n("tb-skeleton",{attrs:{width:"48px",height:"48px",shape:"circle"}})],1),n("skeleton",{staticClass:"skeleton-dynamic-detail-comment-about",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[n("skeleton",{staticClass:"skeleton-dynamic-detail-comment-about-user",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[n("tb-skeleton",{attrs:{width:"116px",height:"16px",shape:"rect"}}),n("tb-skeleton",{attrs:{width:"64px",height:"14px",shape:"rect"}})],1),n("tb-skeleton",{staticClass:"skeleton-dynamic-detail-comment-p",attrs:{width:"100%",height:"15px",shape:"rect"}}),n("tb-skeleton",{staticClass:"skeleton-dynamic-detail-comment-p",attrs:{width:"100%",height:"15px",shape:"rect"}}),n("tb-skeleton",{staticClass:"skeleton-dynamic-detail-comment-p",attrs:{width:"100%",height:"15px",shape:"rect"}}),n("skeleton",{staticClass:"skeleton-dynamic-detail-comment-reply",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[n("tb-skeleton",{attrs:{width:"24%",height:"14px",shape:"rect"}}),n("tb-skeleton",{attrs:{width:"70%",height:"13px",shape:"rect"}})],1),n("skeleton",{staticClass:"skeleton-dynamic-detail-comment-reply",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[n("tb-skeleton",{attrs:{width:"25%",height:"14px",shape:"rect"}}),n("tb-skeleton",{attrs:{width:"70%",height:"13px",shape:"rect"}})],1),n("skeleton",{staticClass:"skeleton-dynamic-detail-comment-reply",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[n("tb-skeleton",{attrs:{width:"23%",height:"14px",shape:"rect"}}),n("tb-skeleton",{attrs:{width:"70%",height:"13px",shape:"rect"}})],1),n("skeleton",{staticClass:"skeleton-dynamic-detail-comment-reply",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[n("tb-skeleton",{attrs:{width:"22%",height:"14px",shape:"rect"}}),n("tb-skeleton",{attrs:{width:"70%",height:"13px",shape:"rect"}})],1),n("skeleton",{staticClass:"skeleton-dynamic-detail-comment-reply",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[n("tb-skeleton",{attrs:{width:"100%",height:"13px",shape:"rect"}})],1)],1)],1)],2)],1)},I=[],H={},B=H,z=(n("c967"),Object(m["a"])(B,$,I,!1,null,"03be8db9",null)),L=z.exports,P=n("28a2"),V=n("cb99"),O=n("c24f"),S={name:"DynamicDetail",data(){return{dynamic:{},fansId:[],showSkeleton:!0,comments:[],inputValue:"",reply:{},showNoComments:!1,userZanCommentId:[],isHot:!0,secondValue:""}},computed:{isLogin(){return this.$store.state.token.token},userId(){return this.$store.state.token.userId}},watch:{isHot(t){t?this.getDynamicCommentsHandle("1"):this.getDynamicCommentsHandle("0")}},async mounted(){this.userId&&this.getUserDynamicCommentsHandle();const t=await Object(V["e"])(this.$route.params.id);0===t.errno?(this.dynamic=t.data,this.getDynamicCommentsHandle(),setTimeout(()=>{this.showSkeleton=!1},50)):this.$toast({message:"数据获取失败",duration:800})},methods:{async getDynamicCommentsHandle(t){const e=await Object(V["d"])(this.$route.params.id,t);0===e.errno&&(this.comments=e.data,this.comments.length<=0&&(this.showNoComments=!0))},async getUserDynamicCommentsHandle(){const t=await Object(O["l"])(this.userId);0===t.errno&&(this.userZanCommentId=t.data)},async addCommentsHandle(){if(this.isLogin){if(this.inputValue.trim().length<=0)return this.$toast("评论内容不能为空！");const t=await Object(V["a"])(this.$route.params.id,this.inputValue,this.reply.comment_id,this.reply.user_id);0===t.errno&&(this.getDynamicCommentsHandle(),this.inputValue="",this.reply={},this.$toast("评论成功"))}else this.$dialog.confirm({message:'<p style="font-size: 16px;line-height: 25px">此操作需要登录，\n是否跳转到登录页面？</p>',showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"确定",confirmButtonColor:"#409fea",cancelButtonText:"取消",cancelButtonColor:"#666"}).then(()=>{this.$router.replace({path:"/login",query:{redirect:this.$route.fullPath}})}).catch(t=>{console.log(t)})},async secondReplysHandle(t){this.reply=t,this.$refs.secondInputRef.$refs.secondReply.showInput=!0},async secondSendHandle(t){if(this.isLogin){if(this.secondValue.trim().length<=0)return this.$toast("评论内容不能为空！");const e=await Object(V["a"])(this.$route.params.id,this.secondValue,t.rootId,t.replyTo);0===e.errno&&(this.getDynamicCommentsHandle(),this.secondValue="",this.reply={},this.$toast("评论成功"))}else this.$dialog.confirm({message:'<p style="font-size: 16px;line-height: 25px">此操作需要登录，\n是否跳转到登录页面？</p>',showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"确定",confirmButtonColor:"#409fea",cancelButtonText:"取消",cancelButtonColor:"#666"}).then(()=>{this.$router.replace({path:"/login",query:{redirect:this.$route.fullPath}})}).catch(t=>{console.log(t)})},async focus(){if(!this.user_login_token)return this.$dialog({message:'<p style="font-size: 16px;line-height: 25px">此操作需要登录，\n是否跳转到登录页面？</p>',showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"确定",confirmButtonColor:"#409fea",cancelButtonText:"取消",cancelButtonColor:"#666"}).then(()=>{this.$router.push({name:"Login"})}).catch(()=>{});const t=await Object(O["L"])(this.dynamic.publisher._id);if(200===t.code){const t=await Object(O["e"])(this.dynamic.publisher._id);if(200===t.code){const e=[];t.data.forEach(t=>e.push(t._id)),this.fansId=e}this.$toast("已添加关注")}},showPreview(t){Object(P["a"])({images:this.dynamic.avatar_url,startPosition:t,closeable:!0})},replyHandle(t){this.reply=t,this.$refs.inputArea.showInput=!0},async userLikeCommentsHandle(t){if(this.isLogin){const e=await Object(O["R"])(this.$route.params.id,"",t);if(0===e.errno){const n=this.comments.findIndex(t=>t._id===e.comment._id);n>-1&&!this.userZanCommentId.includes(t)&&(this.comments[n].zan_number=e.comment.zan_number,this.userZanCommentId.push(t))}}else this.$dialog.confirm({message:'<p style="font-size: 16px;line-height: 25px">此操作需要登录，\n是否跳转到登录页面？</p>',showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"确定",confirmButtonColor:"#409fea",cancelButtonText:"取消",cancelButtonColor:"#666"}).then(()=>{this.$router.replace({path:"/login",query:{redirect:this.$route.fullPath}})}).catch(t=>{console.log(t)})},async userUnlikeCommentsHandle(t){const e=await Object(O["C"])(this.$route.params.id,"",t);if(0===e.errno){const n=this.comments.findIndex(t=>t._id===e.comment._id),s=this.userZanCommentId.indexOf(t);s>-1&&n>-1&&(this.comments[n].zan_number=e.comment.zan_number,this.userZanCommentId.splice(s,1))}},async secondLikeHandle(t){if(this.isLogin){const e=t.firstId,n=t.second_id,s=await Object(O["R"])(this.$route.params.id,n,e);if(0===s.errno){const t=this.comments.findIndex(t=>t._id===e),o=this.comments[t],i=o.second_comment,a=i.findIndex(t=>t._id===n);this.comments[t].second_comment[a].zan_number=s.comment.zan_number,this.userZanCommentId.includes(n)||this.userZanCommentId.push(n)}}else this.$dialog.confirm({message:'<p style="font-size: 16px;line-height: 25px">此操作需要登录，\n是否跳转到登录页面？</p>',showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"确定",confirmButtonColor:"#409fea",cancelButtonText:"取消",cancelButtonColor:"#666"}).then(()=>{this.$router.replace({path:"/login",query:{redirect:this.$route.fullPath}})}).catch(t=>{console.log(t)})},async secondUnlikeHandle(t){const e=t.firstId,n=t.second_id,s=await Object(O["C"])(this.$route.params.id,n,e);if(0===s.errno){const t=this.comments.findIndex(t=>t._id===e),o=this.comments[t],i=o.second_comment,a=i.findIndex(t=>t._id===n),c=this.userZanCommentId.indexOf(n);c>-1&&(this.comments[t].second_comment[a].zan_number=s.comment.zan_number,this.userZanCommentId.splice(c,1))}},getCommentSwicth(t){this.isHot=t}},components:{BottomComment:l,CommentList:x,DivideArea:g["a"],DynamicSkeleton:L},beforeRouteUpdate(t,e,n){console.log(t,e,"-----"),n()},beforeRouteLeave(t,e,n){"MyDetail"===t.name?this.$store.commit("addCachedPages","DynamicDetail"):this.$store.commit("removeCachedPages","DynamicDetail"),n()}},j=S,D=(n("ff93"),Object(m["a"])(j,s,o,!1,null,"86d50528",null));e["default"]=D.exports},cb99:function(t,e,n){"use strict";n.d(e,"g",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"f",(function(){return c})),n.d(e,"e",(function(){return r})),n.d(e,"b",(function(){return m})),n.d(e,"d",(function(){return d})),n.d(e,"a",(function(){return l}));var s=n("751a"),o=n("d399");const i=t=>{const e=new FormData;return e.append("file",t),new Promise((t,n)=>{s["a"].post("/dynamics/upload",e,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{0===e.errno?t(e.data):n(e.data)}).catch(t=>{o["a"].fail("用户未登录！"),n(t)})})},a=t=>s["a"].post("/dynamics",t),c=(t,e=1,n=100)=>s["a"].get(`/dynamics?sort=${t}&current_page=${e}&perpage=${n}`),r=t=>s["a"].get("/dynamics/"+t),m=t=>s["a"].request({method:"DELETE",url:"/dynamics/"+t}),d=(t,e="1")=>s["a"].get(`/dynamics/${t}/comments?sort=${e}`),l=(t,e="",n,o)=>s["a"].post(`/dynamics/${t}/comments?content=${e}`,{content:e,root_comment_id:n,reply_to:o})},d512:function(t,e,n){"use strict";n("5247")},ff93:function(t,e,n){"use strict";n("3267")}}]);