/*!
 * 2020-12-31日上线，闲语H5是陈刚的第一个全栈项目，自己完成从前端设计，
 * 到后端接口的设计，
 * 以及Linux系统上Redis和MongoDB数据库安装使用，Nginx代理部署，HTTPS以及域名申请，
 * 见证了过去半年所有空闲时间的努力！新的一年，奥利给！我轻轻的来了，又轻轻地走了......
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["group-index"],{"01e1":function(t,e,i){},"1a13":function(t,e,i){"use strict";i("5dd1")},"20b8":function(t,e,i){"use strict";i("5533")},"283a":function(t,e,i){},3576:function(t,e,i){t.exports=i.p+"img/courage.32ad7edb.png"},"45a9":function(t,e,i){"use strict";i("01e1")},"48d4":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"xianyu-home-page"},[i("van-tabs",{attrs:{sticky:"",animated:"",swipeable:"","title-active-color":"#409fea",color:"#409fea"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[i("van-tab",{attrs:{id:"van-tabs-scroll",title:"推荐"}},[i("recomend-dynamics",{ref:"recommend",on:{recommend:t.recommendOperate}})],1),i("van-tab",{attrs:{title:"最新"}},[i("latest-dynamics",{ref:"latest",on:{latest:t.latestOperate}})],1),i("van-tab",{attrs:{title:"关注"}},[i("follow-dynamics",{ref:"follow",on:{follow:t.followOperate}})],1)],1),i("van-popup",{staticClass:"dy-popup",class:{unlogin:!t.isLogin,"login-self":t.isSelf,follow:t.isPopupFollow},model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}},[i("div",{staticClass:"dynamic-operate"},[t.isLogin&&!t.isSelf?i("div",{staticClass:"dynamic-operate-item user-report",on:{click:t.reportHandle}},[i("div",{staticClass:"line"}),t._v(" 举报 ")]):t._e(),i("div",{staticClass:"dynamic-operate-item copy-operate"},[i("div",{staticClass:"line"}),i("Copy",{attrs:{content:t.operateDynamic.content&&t.operateDynamic.content.replace(/<br>/g,"\n")},on:{copyCallback:t.copyCallback}},[t._v(" 复制 ")])],1),t.isLogin&&t.isSelf?i("div",{staticClass:"dynamic-operate-item delete-operate",on:{click:t.deleteHandle}},[t._v(" 删除 ")]):t._e()])]),i("i",{staticClass:"iconfont add-word icon-tianxie",on:{click:function(e){return t.$router.push("/dynamic-publish")}}})],1)},n=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"xianyu-dynamic-recommend-r",staticClass:"xianyu-dynamic-recommend-r",attrs:{id:"xianyu-dynamic-recommend-r"}},[t.skeletonLoading?i("dynamic-skeleton"):t._e(),t.recommendDynamics.length>0?i("van-pull-refresh",{attrs:{"loosing-text":"别老拽着,快放开我","loading-text":"正在刷新中","success-text":"刷新成功"},on:{refresh:t.onPullDownRefresh},model:{value:t.pullDown,callback:function(e){t.pullDown=e},expression:"pullDown"}},[i("van-list",{attrs:{finished:t.loadMoreFinished,"immediate-check":!1,"loading-text":"正在飞奔中......","finished-text":"别刷了,真的没有啦......"},on:{load:t.onLoadMoreHandle},model:{value:t.loadMore,callback:function(e){t.loadMore=e},expression:"loadMore"}},t._l(t.recommendDynamics,(function(e,s){return i("dynamic-item",{key:e._id+Math.random(),attrs:{"is-first":0===s,"item-value":e,"is-like":t.isLogin&&t.userZanedId.includes(e._id)},on:{unlike:function(i){return t.userCancelZan(e._id)},like:function(i){return t.userZanHandle(e._id)},operate:t.recommendOperate}})})),1)],1):t._e(),i("van-empty",{directives:[{name:"show",rawName:"v-show",value:t.showNoRecommend&&!t.showDynamicsTag,expression:"showNoRecommend && !showDynamicsTag"}],attrs:{description:"什么内容都没有哟"}})],1)},o=[],c=i("cb99"),r=i("85fb"),l=i("60bb"),d=i("c24f"),m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"skeleton-wrapper"},t._l(3,(function(t){return i("skeleton",{key:t+Math.random(),attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[i("skeleton",{staticClass:"skeleton-user-avatar",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[i("tb-skeleton",{attrs:{width:"48px",height:"48px",shape:"circle"}}),i("skeleton",{staticClass:"skeleton-user-avatar-title",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[i("tb-skeleton",{attrs:{width:"85%",height:"16px",shape:"rect"}}),i("tb-skeleton",{staticClass:"skeleton-user-avatar-title-time",attrs:{width:"100%",height:"12px",shape:"rect"}})],1)],1),i("skeleton",{staticClass:"skeleton-content",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[i("tb-skeleton",{attrs:{width:"100%",height:"80px",shape:"rect"}})],1),i("skeleton",{staticClass:"skeleton-operate",attrs:{theme:"opacity","bg-color":"#dcdbdc"}},[i("tb-skeleton",{staticClass:"skeleton-operate-item",attrs:{height:"14px",shape:"rect"}}),i("tb-skeleton",{staticClass:"skeleton-operate-item",attrs:{height:"14px",shape:"rect"}}),i("tb-skeleton",{staticClass:"skeleton-operate-item",attrs:{height:"14px",shape:"rect"}})],1)],1)})),1)},u=[],h={},p=h,f=(i("6066"),i("2877")),y=Object(f["a"])(p,m,u,!1,null,"ce6b4cd8",null),g=y.exports,w={name:"DynamicRecommend",data(){return{pullDown:!1,isLike:!0,showDynamicsTag:!0,currentPage:1,perPage:30,loadMore:!1,loadMoreFinished:!1,scrollTop:0,emptyImg:i("c212"),skeletonLoading:!0}},computed:{showNoRecommend(){return this.recommendDynamics.length<=0},totalPage(){return Math.ceil(this.total/this.perPage)},userId(){return this.$store.state.token.userId},isLogin(){return this.$store.state.token.token},recommendDynamics(){return this.$store.state.recommendDynamics.data},total(){return this.$store.state.recommendDynamics.total},userZanedId(){return this.$store.state.loginUserZanDynamicsId}},mounted(){this.getRecommendDynamics(),this.$refs["xianyu-dynamic-recommend-r"]&&this.$refs["xianyu-dynamic-recommend-r"].addEventListener("scroll",Object(l["debounce"])(this.scrollTopHandle,30))},activated(){this.$refs["xianyu-dynamic-recommend-r"]&&(this.$refs["xianyu-dynamic-recommend-r"].scrollTop=this.scrollTop)},beforeDestroy(){this.$refs["xianyu-dynamic-recommend-r"]&&this.$refs["xianyu-dynamic-recommend-r"].removeEventListener("scroll",this.scrollTopHandle,!0)},methods:{async getRecommendDynamics(){const t=await Object(c["f"])(0,this.currentPage,this.perPage);0===t.errno&&(this.$store.commit("modifyRecommendDynamics",{data:t.data,total:t.total}),this.recommendDynamics.length>0?this.showDynamicsTag=!0:this.showDynamicsTag=!1,this.skeletonLoading=!1)},async onPullDownRefresh(){this.currentPage=1,this.loadMore=!1,this.loadMoreFinished=!1;const t=await Object(c["f"])(0,this.currentPage,this.perPage);0===t.errno&&(this.$store.commit("modifyRecommendDynamics",{data:t.data,total:t.total}),this.pullDown=!1,this.recommendDynamics.length>0?this.showDynamicsTag=!0:this.showDynamicsTag=!1,this.$toast("刷新成功"))},async onLoadMoreHandle(){if(this.totalPage<=this.currentPage)return void(this.loadMoreFinished=!0);const t=await Object(c["f"])(0,++this.currentPage,this.perPage);0===t.errno&&(this.$store.commit("modifyRecommendDynamics",{data:[...this.recommendDynamics,...t.data],total:t.total}),this.loadMore=!1)},scrollTopHandle(){this.scrollTop=this.$refs["xianyu-dynamic-recommend-r"].scrollTop},async userCancelZan(t){const e=await Object(d["u"])(t);if(0===e.errno){const e=this.userZanedId.indexOf(t),i=this.recommendDynamics.findIndex(e=>e._id===t);if(e>-1){const t=JSON.parse(JSON.stringify(this.recommendDynamics[""+i]));t.zan_number--,this.$set(this.recommendDynamics,i,t),this.userZanedId.splice(e,1)}}},async userZanHandle(t){if(this.isLogin){const e=await Object(d["o"])(t);if(0===e.errno&&!this.userZanedId.includes(t)){this.userZanedId.push(t);const e=this.recommendDynamics.findIndex(e=>e._id===t),i=JSON.parse(JSON.stringify(this.recommendDynamics[""+e]));i.zan_number++,this.$set(this.recommendDynamics,e,i)}}else this.$dialog.confirm({message:'<p style="font-size: 16px;line-height: 25px">此操作需要登录，\n是否跳转到登录页面？</p>',showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"确定",confirmButtonColor:"#409fea",cancelButtonText:"取消",cancelButtonColor:"#666"}).then(()=>{this.$router.replace({path:"/login",query:{redirect:this.$route.fullPath}})}).catch(t=>{console.log(t)})},recommendOperate(t){this.$emit("recommend",t)}},components:{DynamicItem:r["a"],DynamicSkeleton:g}},b=w,D=(i("45a9"),Object(f["a"])(b,a,o,!1,null,"624a2e08",null)),v=D.exports,x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"xianyu-dynamic-my-follow",staticClass:"xianyu-dynamic-my-follow"},[i("van-pull-refresh",{attrs:{"loosing-text":"别老拽着,快放开我","loading-text":"正在刷新中","success-text":"刷新成功"},on:{refresh:t.pullDownRefresh},model:{value:t.pullDown,callback:function(e){t.pullDown=e},expression:"pullDown"}},[i("van-list",{attrs:{finished:t.loadMoreFinished,"immediate-check":!1,"loading-text":"正在飞奔中......","finished-text":"别刷了,真的没有啦......"},on:{load:t.onLoadMoreHandle},model:{value:t.loadMore,callback:function(e){t.loadMore=e},expression:"loadMore"}},t._l(t.followDynamics,(function(e,s){return i("dynamic-item",{key:e._id,attrs:{"is-first":0===s,"item-value":e,"is-like":t.isLogin&&t.userZanedId.includes(e._id),"is-collect":t.isLogin&&t.userCollectedId.includes(e._id)},on:{unlike:function(i){return t.userCancelZanHandle(e._id)},like:function(i){return t.userZanHandle(e._id)},uncollect:function(i){return t.userCancelCollect(e._id)},collect:function(i){return t.userCollectHandle(e._id)},operate:t.followOperate}})})),1)],1),t.isLogin?t._e():i("div",{staticClass:"dynamic-follow-unlogin"},[i("p",{staticClass:"dynamic-follow-unlogin-tips"},[t._v("需要登录，或登录已过期需要重新登录")]),i("a",{staticClass:"dynamic-follow-unlogin-link",on:{click:function(e){return t.$router.replace({path:"/login",query:{redirect:"/dynamic"}})}}},[t._v(" 去登录 ")])]),!t.showTag&&t.isLogin?i("van-empty",{attrs:{description:"什么内容都没有",image:t.emptyImg}}):t._e()],1)},_=[],k={name:"DynamicFollow",data(){return{emptyImg:i("c212"),pullDown:!1,loadMore:!1,loadMoreFinished:!1,followDynamics:[],scrollTop:0,total:0,perPage:15,currentPage:1,showTag:!0,userCollectedId:[]}},mounted(){this.userId&&(this.getFollowUserDynamcisHandle(),this.getUserCollectedDynamicsHandle()),this.$refs["xianyu-dynamic-my-follow"].addEventListener("scroll",Object(l["debounce"])(this.scrollTopHandle,30))},activated(){this.userId&&(this.getFollowUserDynamcisHandle(),this.getUserCollectedDynamicsHandle()),this.$refs["xianyu-dynamic-my-follow"].scrollTop=this.scrollTop},beforeDestroy(){this.$refs["xianyu-dynamic-my-follow"].removeEventListener("scroll",this.scrollTopHandle,!0)},computed:{isLogin(){return this.$store.state.token.token},userId(){return this.$store.state.token.userId},totalPage(){return Math.ceil(this.total/this.perPage)},userZanedId(){return this.$store.state.loginUserZanDynamicsId}},methods:{async getFollowUserDynamcisHandle(){const t=await Object(d["d"])(this.userId,this.currentPage,this.perPage);0===t.errno&&(this.followDynamics=t.data,this.total=t.total,this.followDynamics.length<=0&&(this.showTag=!1))},async getUserCollectedDynamicsHandle(){const t=await Object(d["j"])(this.userId);if(0===t.errno){const e=[];t.data.forEach(t=>{e.push(t._id)}),this.userCollectedId=e}},async pullDownRefresh(){this.currentPage=1,this.loadMoreFinished=!1,this.loadMore=!1,this.pullDown=!1;const t=await Object(d["d"])(this.userId,this.currentPage,this.perPage);0===t.errno&&(this.followDynamics=t.data,this.total=t.total,this.followDynamics.length<=0&&(this.showTag=!1),this.$toast("刷新成功"))},async onLoadMoreHandle(){if(this.totalPage<=this.currentPage)return void(this.loadMoreFinished=!0);const t=await Object(d["d"])(this.userId,++this.currentPage,this.perPage);0===t.errno&&(this.followDynamics=[...this.followDynamics,...t.data],this.loadMore=!1)},async userZanHandle(t){const e=await Object(d["o"])(t);if(0===e.errno&&!this.userZanedId.includes(t)){this.userZanedId.push(t);const e=this.followDynamics.findIndex(e=>e._id===t),i=JSON.parse(JSON.stringify(this.followDynamics[""+e]));i.zan_number++,this.$set(this.followDynamics,e,i)}},async userCancelZanHandle(t){const e=await Object(d["u"])(t);if(0===e.errno){const e=this.userZanedId.indexOf(t),i=this.followDynamics.findIndex(e=>e._id===t);if(e>-1){const t=JSON.parse(JSON.stringify(this.followDynamics[""+i]));t.zan_number--,this.$set(this.followDynamics,i,t),this.userZanedId.splice(e,1)}}},async userCancelCollect(t){const e=await Object(d["x"])(t);if(0===e.errno){const e=this.userCollectedId.indexOf(t),i=this.followDynamics.findIndex(e=>e._id===t);if(e>-1){const t=JSON.parse(JSON.stringify(this.followDynamics[""+i]));t.collect_number--,this.$set(this.followDynamics,i,t),this.userCollectedId.splice(e,1)}}},async userCollectHandle(t){const e=await Object(d["H"])(t);if(0===e.errno&&!this.userCollectedId.includes(t)){this.userCollectedId.push(t);const e=this.followDynamics.findIndex(e=>e._id===t),i=JSON.parse(JSON.stringify(this.followDynamics[""+e]));i.collect_number++,this.$set(this.followDynamics,e,i)}},scrollTopHandle(){this.scrollTop=this.$refs["xianyu-dynamic-my-follow"].scrollTop},followOperate(t){this.$emit("follow",t)}},components:{DynamicItem:r["a"]}},C=k,$=(i("1a13"),Object(f["a"])(C,x,_,!1,null,"348e1a19",null)),O=$.exports,I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"xianyu-dynamic-latest-r",staticClass:"xianyu-dynamic-latest-r"},[t.latestDynamics.length>0?i("van-pull-refresh",{attrs:{"loosing-text":"别老拽着,快放开我","loading-text":"正在刷新中","success-text":"刷新成功"},on:{refresh:t.onLatestRefresh},model:{value:t.pullDown,callback:function(e){t.pullDown=e},expression:"pullDown"}},[i("div",{staticClass:"homepage-newest"},[i("van-list",{attrs:{finished:t.loadMoreFinished,"immediate-check":!1,"loading-text":"正在飞奔中......","finished-text":"别刷了,真的没有啦......"},on:{load:t.onLoadMoreHandle},model:{value:t.loadMore,callback:function(e){t.loadMore=e},expression:"loadMore"}},t._l(t.latestDynamics,(function(e,s){return i("dynamic-item",{key:e._id,attrs:{"is-first":0===s,"item-value":e,"is-collect":t.isLogin&&t.userCollectedId.includes(e._id),"is-like":t.isLogin&&t.userZanedId.includes(e._id)},on:{unlike:function(i){return t.userCancelZanHandle(e._id)},like:function(i){return t.userZanHandle(e._id)},uncollect:function(i){return t.userCancelCollect(e._id)},collect:function(i){return t.userCollectHandle(e._id)},operate:t.latestOperate}})})),1)],1)]):t._e(),t.showNoLatest&&t.showTag?i("van-empty",{attrs:{description:"什么内容都没有"}}):t._e()],1)},P=[],L={name:"DynamicLatest",data(){return{pullDown:!1,currentPage:1,perPage:30,showTag:!1,loadMore:!1,loadMoreFinished:!1,scrollTop:0,userCollectedId:[]}},mounted(){this.getLatestDynamics(),this.$refs["xianyu-dynamic-latest-r"].addEventListener("scroll",Object(l["debounce"])(this.pageScrollTop,30))},watch:{latestDynamics(t){t.length<=0?this.showTag=!0:this.showTag=!1}},activated(){this.$refs["xianyu-dynamic-latest-r"].scrollTop=this.scrollTop},beforeDestroy(){this.$refs["xianyu-dynamic-latest-r"].removeEventListener("scroll",this.pageScrollTop,!0)},computed:{showNoLatest(){return this.latestDynamics.length<=0},totalPage(){return Math.ceil(this.total/this.perPage)},userId(){return this.$store.state.token.userId},isLogin(){return this.$store.state.token.token},latestDynamics(){return this.$store.state.latestDynamics.data},total(){return this.$store.state.latestDynamics.total},userZanedId(){return this.$store.state.loginUserZanDynamicsId}},methods:{async getLatestDynamics(){const t=await Object(c["f"])(1,this.currentPage);0===t.errno&&(this.$store.commit("modifyLatestDynamics",{data:t.data,total:t.total}),this.latestDynamics.length<=0&&(this.showTag=!0))},pageScrollTop(){this.scrollTop=this.$refs["xianyu-dynamic-latest-r"].scrollTop},async onLatestRefresh(){this.currentPage=1;const t=await Object(c["f"])(1,this.currentPage);0===t.errno&&(this.$store.commit("modifyLatestDynamics",{data:t.data,total:t.total}),this.pullDown=!1,this.$toast({message:"刷新成功",duration:800}))},async onLoadMoreHandle(){if(this.totalPage<=this.currentPage)return void(this.loadMoreFinished=!0);const t=await Object(c["f"])(1,++this.currentPage);0===t.errno&&(this.$store.commit("modifyLatestDynamics",{data:[...this.latestDynamics,...t.data],total:t.total}),this.loadMore=!1)},async userCancelZanHandle(t){const e=await Object(d["u"])(t);if(0===e.errno){const e=this.userZanedId.indexOf(t),i=this.latestDynamics.findIndex(e=>e._id===t);if(e>-1){const t=JSON.parse(JSON.stringify(this.latestDynamics[""+i]));t.zan_number--,this.$set(this.latestDynamics,i,t),this.userZanedId.splice(e,1)}}},async userZanHandle(t){if(this.isLogin){const e=await Object(d["o"])(t);if(0===e.errno&&!this.userZanedId.includes(t)){this.userZanedId.push(t);const e=this.latestDynamics.findIndex(e=>e._id===t),i=JSON.parse(JSON.stringify(this.latestDynamics[""+e]));i.zan_number++,this.$set(this.latestDynamics,e,i)}}else this.$dialog.confirm({message:'<p style="font-size: 16px;line-height: 25px">此操作需要登录，\n是否跳转到登录页面？</p>',showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"确定",confirmButtonColor:"#409fea",cancelButtonText:"取消",cancelButtonColor:"#666"}).then(()=>{this.$router.replace({path:"/login",query:{redirect:this.$route.fullPath}})}).catch(t=>{console.log(t)})},async userCancelCollect(t){const e=await Object(d["x"])(t);if(0===e.errno){const e=this.userCollectedId.indexOf(t),i=this.latestDynamics.findIndex(e=>e._id===t);if(e>-1){const t=JSON.parse(JSON.stringify(this.latestDynamics[""+i]));t.collect_number--,this.$set(this.latestDynamics,i,t),this.userCollectedId.splice(e,1)}}},async userCollectHandle(t){if(this.isLogin){const e=await Object(d["H"])(t);if(0===e.errno&&!this.userCollectedId.includes(t)){this.userCollectedId.push(t);const e=this.latestDynamics.findIndex(e=>e._id===t),i=JSON.parse(JSON.stringify(this.latestDynamics[""+e]));i.collect_number++,this.$set(this.latestDynamics,e,i)}}else this.$dialog.confirm({message:'<p style="font-size: 16px;line-height: 25px">此操作需要登录，\n是否跳转到登录页面？</p>',showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"确定",confirmButtonColor:"#409fea",cancelButtonText:"取消",cancelButtonColor:"#666"}).then(()=>{this.$router.replace({path:"/login",query:{redirect:this.$route.fullPath}})}).catch(t=>{console.log(t)})},latestOperate(t){this.$emit("latest",t)}},components:{DynamicItem:r["a"]}},T=L,H=(i("7393"),Object(f["a"])(T,I,P,!1,null,"fa45d892",null)),M=H.exports,S=i("b115"),j={name:"Dynamic",metaInfo:S["a"].Dynamic,data(){return{active:0,dynamics:[],showNoRecommend:!0,recommendDynamics:[],showNoLatest:!0,latestDynamics:[],followDynamics:[],isRecommendLoading:!0,isLoading:!0,isLatestLoading:!0,showPopup:!1,emptyImg:i("c212"),operateDynamic:{},isPopupFollow:!1}},mounted(){this.$store.commit("addCachedPages","Dynamic")},computed:{isSelf(){return this.operateDynamic.u_id===this.userId},isLogin(){return this.$store.state.token.token},userId(){return this.$store.state.token.userId}},components:{RecomendDynamics:v,FollowDynamics:O,LatestDynamics:M},methods:{latestOperate(t){this.showPopup=!0,this.isPopupFollow=!1,this.operateDynamic=t},recommendOperate(t){this.showPopup=!0,this.isPopupFollow=!1,this.operateDynamic=t},followOperate(t){this.showPopup=!0,this.isPopupFollow=!0,this.operateDynamic=t},copyCallback(){this.showPopup=!1,this.$toast("复制成功"),this.operateDynamic.content=""},reportHandle(){this.showPopup=!1,this.$toast("举报成功")},shieldHandle(){this.$toast("屏蔽成功"),this.showPopup=!1},noInterestingHandle(){this.$toast("此动态将不再出现"),this.showPopup=!1},deleteHandle(){this.showPopup=!1,this.$dialog.confirm({width:"315px",confirmButtonColor:"#666",cancelButtonColor:"#e92322",confirmButtonText:"取消",cancelButtonText:"确定",allowHtml:!0,message:'<h1 style="color: #555; line-height: 24px;font-size:16px">确定要删除这条动态吗？</h1>'}).then(()=>{}).catch(async()=>{const t=await Object(c["b"])(this.operateDynamic.d_id);if(0===t.errno){const t=JSON.parse(JSON.stringify(this.$store.state.latestDynamics)),e=JSON.parse(JSON.stringify(this.$store.state.recommendDynamics));let i=t.total,s=e.total;const n=t.data,a=e.data,o=n.findIndex(t=>t._id===this.operateDynamic.d_id),c=a.findIndex(t=>t._id===this.operateDynamic.d_id);o>-1&&n.splice(o,1),c>-1&&a.splice(c,1),i-=1,s-=1,this.$store.commit("modifyLatestDynamics",{data:n,total:i}),this.$store.commit("modifyRecommendDynamics",{data:a,total:s}),this.$toast("删除成功")}})}}},N=j,Z=(i("eeb3"),Object(f["a"])(N,s,n,!1,null,"1afb1bc5",null));e["default"]=Z.exports},5533:function(t,e,i){},"5bc0":function(t,e,i){},"5dd1":function(t,e,i){},6066:function(t,e,i){"use strict";i("283a")},"71f1":function(t,e,i){},7393:function(t,e,i){"use strict";i("5bc0")},"85fb":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dynamic-item"},[i("div",{staticClass:"dynamic-item-user"},[i("div",{staticClass:"dynamic-item-user-container"},[i("xianyu-image",{attrs:{img:t.itemValue.publisher.avatar_url,width:50,height:50,round:""},on:{click:function(e){return t.$router.push("/my-detail/"+t.itemValue.publisher._id)}}}),i("div",{staticClass:"dynamic-item-user-about"},[i("h1",[t._v(t._s(t.itemValue.publisher.nickname))]),i("h3",[t._v(t._s(t._f("timeformat")(t.itemValue.createdAt)))])])],1),t.showOperate?i("i",{staticClass:"iconfont icon-gengduo",on:{click:t.userOperate}}):t._e()]),i("div",{ref:"homepage-item-area",staticClass:"dynamic-item-area",on:{click:t.goDynamicDetail}},[i("p",{domProps:{innerHTML:t._s(t.itemValue.content)}}),i("div",{staticClass:"img-preview-container"},t._l(t.itemValue.avatar_url,(function(e,s){return i("xianyu-image",{key:e,attrs:{width:100,height:100,img:e},on:{click:function(e){return t.showPreview(s,t.itemValue.avatar_url)}}})})),1)]),i("div",{staticClass:"dynamic-item-operation"},[i("div",{staticClass:"share-icon",on:{click:t.userShare}},[i("i",{staticClass:"iconfont icon-fenxiang"})]),i("div",{staticClass:"comment-icon",on:{click:function(e){return t.$router.push("/dynamic-detail/"+t.itemValue._id)}}},[i("i",{staticClass:"iconfont icon-pinglun"}),i("span",{staticClass:"dynamic-exble-style"},[t._v(t._s(t.itemValue.comment_number>999?"999+":t.itemValue.comment_number))])]),i("div",{staticClass:"zan-icon"},[t.isLike?i("i",{staticClass:"iconfont icon-dianzan",on:{click:function(e){return t.$emit("unlike")}}}):t._e(),i("i",{directives:[{name:"show",rawName:"v-show",value:!t.isLike,expression:"!isLike"}],staticClass:"iconfont icon-dianzan1",on:{click:function(e){return t.$emit("like")}}}),i("span",{staticClass:"dynamic-exble-style"},[t._v(t._s(t.itemValue.zan_number>999?"999+":t.itemValue.zan_number))])])])])},n=[],a=i("28a2"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"xianyu-image-component"},[i("img",{staticClass:"xianyu-image-component-img",class:{round:t.round},style:{width:t.width+"px",height:t.height+"px"},attrs:{src:t.img,alt:"头像"},on:{click:function(e){return t.$emit("click")}}})])},c=[],r={name:"XianyuImage",props:{img:{type:String,required:!0},width:{type:Number,default:100},height:{type:Number,default:100},round:{type:Boolean,default:!1}}},l=r,d=(i("c7fb"),i("2877")),m=Object(d["a"])(l,o,c,!1,null,"c6fd721a",null),u=m.exports,h={name:"HomepageItem",props:{isFirst:{type:Boolean,default:!1},itemValue:{type:Object,default:()=>{}},isLike:{type:Boolean,default:!1},deleteOperate:{type:Boolean,default:!1},isPrivate:{type:Boolean,default:!1},showOperate:{type:Boolean,default:!0}},data(){return{img:i("3576")}},computed:{isLogin(){return this.$store.state.token.token},userId(){return this.$store.state.token.userId}},methods:{showPreview(t,e){Object(a["a"])({images:e,startPosition:t,closeable:!0})},goDynamicDetail(t){[...t.target.classList].includes("xianyu-image-component-img")||this.$router.push("/dynamic-detail/"+this.itemValue._id)},userOperate(){this.$emit("operate",{d_id:this.itemValue._id,nickname:this.itemValue.publisher.nickname,content:this.itemValue.content,u_id:this.itemValue.publisher._id})},userShare(){this.$toast.success("后续实现中")}},components:{XianyuImage:u}},p=h,f=(i("20b8"),Object(d["a"])(p,s,n,!1,null,"7ec95f0c",null));e["a"]=f.exports},"86a9":function(t,e,i){},ab1f:function(t,e,i){"use strict";i("86a9")},b115:function(t,e,i){"use strict";e["a"]={Discover:{title:"闲语H5端，陈刚的全栈项目",meta:[{name:"网站首页",content:"闲语 www.cghbh.com 诗词文艺 cghbh"}]},ArticleList:{title:"凌云健笔意纵横，更多好文尽在闲语H5",meta:[{name:"好文列表",content:"闲语 好文 www.cghbh.com cghbh"}]},ArticleDetail:{title:"凌云健笔意纵横，更多好文尽在闲语H5",meta:[{name:"好文详情",content:"闲语 好文 www.cghbh.com cghbh"}]},Dynamic:{title:"畅所欲言，记录每一天！",meta:[{name:"动态",content:"闲语 动态 cghbh www.cghbh.com 动态发布"}]},Competition:{title:"知识竞赛，思维拓展",meta:[{name:"动态",content:"闲语 竞赛 cghbh www.cghbh.com 知识竞赛 趣味知识"}]},MyDetail:{title:"我的地盘我做主",meta:[{name:"动态",content:"闲语 主页 cghbh www.cghbh.com  个人主页"}]}}},c212:function(t,e,i){t.exports=i.p+"img/empty-image-default.0bc9958e.png"},c7fb:function(t,e,i){"use strict";i("ef7f")},cb99:function(t,e,i){"use strict";i.d(e,"g",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"f",(function(){return c})),i.d(e,"e",(function(){return r})),i.d(e,"b",(function(){return l})),i.d(e,"d",(function(){return d})),i.d(e,"a",(function(){return m}));var s=i("751a"),n=i("d399");const a=t=>{const e=new FormData;return e.append("file",t),new Promise((t,i)=>{s["a"].post("/dynamics/upload",e,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{0===e.errno?t(e.data):i(e.data)}).catch(t=>{n["a"].fail("用户未登录！"),i(t)})})},o=t=>s["a"].post("/dynamics",t),c=(t,e=1,i=100)=>s["a"].get(`/dynamics?sort=${t}&current_page=${e}&perpage=${i}`),r=t=>s["a"].get("/dynamics/"+t),l=t=>s["a"].request({method:"DELETE",url:"/dynamics/"+t}),d=(t,e="1")=>s["a"].get(`/dynamics/${t}/comments?sort=${e}`),m=(t,e="",i,n)=>s["a"].post(`/dynamics/${t}/comments?content=${e}`,{content:e,root_comment_id:i,reply_to:n})},d504:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"xianyu-index"},[i("keep-alive",{attrs:{include:t.cachedPages}},[i("router-view")],1),i("van-tabbar",{staticClass:"active-tabbar",attrs:{route:"","active-color":"#409fea","inactive-color":"#000"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.bottomIcon,(function(e){return i("van-tabbar-item",{key:e.to,attrs:{to:e.to,replace:""},scopedSlots:t._u([{key:"icon",fn:function(t){return[i("i",{class:["iconfont",t.active?e.active:e.inactive]})]}}],null,!0)},[i("span",[t._v(t._s(e.title))])])})),1)],1)},n=[],a=i("5880"),o={name:"HomePage",data(){return{active:0,bottomIcon:[{to:"/",active:"icon-home-fill",inactive:"icon-home",title:"首页"},{to:"/dynamic",active:"icon-compass-fill",inactive:"icon-compass",title:"动态"},{to:"/knowledge-competition",active:"icon-bisai",inactive:"icon-bisai",title:"竞赛"},{to:"/mine",active:"icon-user-fill",inactive:"icon-account",title:"我的"}]}},mounted(){this.$store.commit("addCachedPages","HomePage")},computed:{...Object(a["mapState"])(["cachedPages"])}},c=o,r=(i("ab1f"),i("2877")),l=Object(r["a"])(c,s,n,!1,null,"80995cca",null);e["default"]=l.exports},eeb3:function(t,e,i){"use strict";i("71f1")},ef7f:function(t,e,i){}}]);